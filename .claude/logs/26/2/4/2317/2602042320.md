# Redis @class 타입 정보 누락 오류 수정

## 날짜: 2026-02-04

## 문제
```
SerializationException: Could not resolve subtype of [simple type, class java.lang.Object]: missing type id property '@class'
```

## 원인
- 이전 RedisConfig 변경 시 `activateDefaultTyping`을 추가하여 `@class` 타입 정보 필수화
- 기존 Redis에 저장된 데이터에는 `@class` 정보가 없어서 역직렬화 실패

## 해결 방법
- `GenericJackson2JsonRedisSerializer` (범용) 대신 타입별 전용 RedisTemplate 사용
- `RefreshTokenInfo` 전용: `Jackson2JsonRedisSerializer`로 타입 명시
- 문자열용: `StringRedisSerializer` 사용

## 수정된 파일
- `src/main/java/yi/memberapi/common/config/RedisConfig.kt`
  - `refreshTokenRedisTemplate`: RefreshTokenInfo 전용
  - `stringRedisTemplate`: 문자열 데이터용 (accessToken, userTokens 등)
- `src/main/java/yi/memberapi/application/provided/RedisTokenRepository.kt`
  - 타입별 RedisTemplate 주입 사용

## 주의사항
- 기존 Redis에 저장된 토큰은 여전히 호환되지 않을 수 있음
- Redis 재시작 또는 기존 키 삭제 필요 시 사용자 재로그인 필요

## 참조 명령 파일
- `.claude/prompts/26/2/4/2317.md`
