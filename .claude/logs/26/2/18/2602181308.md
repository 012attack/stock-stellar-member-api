# 각 목록 API에 즐겨찾기 필터 기능 추가

## 작업일시
2026-02-18

## 사용한 프롬프트
`.claude/prompts/26/2/18/1308.md`

## 작업 내용
6개 도메인(NEWS, STOCK, THEME, STOCK_GROUP, RECORD, OPINION)의 목록 API에 `favoriteOnly` 파라미터를 추가하여 즐겨찾기한 항목만 필터링하는 기능 구현.

## 수정 파일 목록

### Step 1: FavoriteRepository에 ID 조회 메서드 추가
- `application/provided/FavoriteRepository.kt` - `findTargetIdsByMemberIdAndTargetType` 메서드 추가

### Step 2: 각 Repository에 favoriteIds 필터 메서드 추가
- `application/provided/NewsRepository.kt` - `findWithFiltersByFavoriteIds` 추가
- `application/provided/StockRepository.kt` - `findWithFiltersByFavoriteIds` 추가
- `application/provided/ThemeRepository.kt` - `findWithFiltersByFavoriteIds` 추가
- `application/provided/StockGroupRepository.kt` - `findByMemberIdAndFavoriteIds` 추가
- `application/provided/DailyTop30RecordRepository.kt` - `findByRecordDateBetweenWithStockAndThemesByFavoriteIds`, `findByDateRangeWithFiltersByFavoriteIds` 추가
- `application/provided/OpinionRepository.kt` - `findByTargetTypeAndTargetIdByFavoriteIds`, `findByTargetTypeByFavoriteIds` 추가

### Step 3: Lister 인터페이스 파라미터 추가
- `application/required/NewsLister.kt` - `favoriteOnly`, `memberId` 파라미터 추가
- `application/required/StockLister.kt` - `favoriteOnly`, `memberId` 파라미터 추가
- `application/required/ThemeLister.kt` - `favoriteOnly`, `memberId` 파라미터 추가
- `application/required/StockGroupLister.kt` - `favoriteOnly` 파라미터 추가
- `application/required/DailyTop30RecordLister.kt` - `favoriteOnly`, `memberId` 파라미터 추가
- `application/required/OpinionLister.kt` - `favoriteOnly`, `memberId` 파라미터 추가

### Step 4: QueryLister 구현체 수정
- `application/impl/news/query/QueryNewsLister.kt` - FavoriteRepository 의존성 추가, favoriteOnly 분기 로직
- `application/impl/stock/query/QueryStockLister.kt` - FavoriteRepository 의존성 추가, favoriteOnly 분기 로직
- `application/impl/theme/query/QueryThemeLister.kt` - FavoriteRepository 의존성 추가, favoriteOnly 분기 로직
- `application/impl/stockgroup/query/QueryStockGroupLister.kt` - FavoriteRepository 의존성 추가, favoriteOnly 분기 로직
- `application/impl/record/query/QueryDailyTop30RecordLister.kt` - FavoriteRepository 의존성 추가, favoriteOnly 분기 로직
- `application/impl/opinion/query/QueryOpinionLister.kt` - FavoriteRepository 의존성 추가, favoriteOnly 분기 로직

### Step 5: API 컨트롤러 수정
- `adapter/webapi/news/GetNewsListApi.kt` - `favoriteOnly` RequestParam, SecurityContext 추출
- `adapter/webapi/stock/GetStockListApi.kt` - `favoriteOnly` RequestParam, SecurityContext 추출
- `adapter/webapi/theme/GetThemeListApi.kt` - `favoriteOnly` RequestParam, SecurityContext 추출
- `adapter/webapi/stockgroup/GetStockGroupListApi.kt` - `favoriteOnly` RequestParam 추가
- `adapter/webapi/record/GetDailyTop30RecordListApi.kt` - `favoriteOnly` RequestParam, SecurityContext 추출
- `adapter/webapi/opinion/GetNewsOpinionListApi.kt` - `favoriteOnly` RequestParam, SecurityContext 추출
- `adapter/webapi/opinion/GetRecordOpinionListApi.kt` - `favoriteOnly` RequestParam, SecurityContext 추출

### Step 6: API 문서 수정
- `api_documents/news.md` - `favoriteOnly` 파라미터 추가
- `api_documents/stock.md` - `favoriteOnly` 파라미터 추가
- `api_documents/theme.md` - `favoriteOnly` 파라미터 추가
- `api_documents/stock_group.md` - `favoriteOnly` 파라미터 추가
- `api_documents/record.md` - `favoriteOnly` 파라미터 추가
- `api_documents/opinion.md` - 4개 GET 엔드포인트에 `favoriteOnly` 파라미터 추가

## 총 수정 파일 수: 31개

## 빌드 결과
`./gradlew compileKotlin` - BUILD SUCCESSFUL
